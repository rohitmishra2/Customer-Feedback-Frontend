<div class="container py-5" style="max-width: 1000px;">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold text-dark mb-1" style="letter-spacing: -0.5px;">Product Catalog</h2>
      <p class="text-secondary small">Manage and update your inventory list</p>
    </div>
    <a class="btn btn-sm btn-outline-secondary rounded-pill px-3" routerLink="/admin">Back</a>
  </div>

  <div class="custom-card-3d p-4 mb-5">
    <h6 class="text-uppercase text-muted fw-bold mb-4" style="font-size: 10px; letter-spacing: 2px;">
      {{ editingId ? 'Update Product' : 'Add New Product' }}
    </h6>
    
    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="row g-3">
        <div class="col-md-5">
          <label class="form-label small fw-bold text-secondary">NAME</label>
          <input class="form-control form-control-sm custom-input" formControlName="name" placeholder="e.g., Laptop" />
        </div>

        <div class="col-md-7">
          <label class="form-label small fw-bold text-secondary">DESCRIPTION</label>
          <input class="form-control form-control-sm custom-input" formControlName="description" placeholder="Optional details..." />
        </div>

        <div class="col-12 d-flex gap-2 mt-4">
          <button class="btn btn-primary btn-3d" [disabled]="loading || form.invalid">
            {{ loading ? 'Saving...' : (editingId ? 'Update' : 'Add Product') }}
          </button>
          <button class="btn btn-light btn-sm fw-bold px-3" type="button" *ngIf="editingId" (click)="cancelEdit()">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h6 class="text-uppercase text-muted fw-bold" style="font-size: 10px; letter-spacing: 2px;">Inventory</h6>
    <span class="badge rounded-pill bg-dark" *ngIf="products.length">{{ products.length }} Items</span>
  </div>

  <div class="row g-4" *ngIf="!loading || products.length">
    <div class="col-md-6 col-lg-4" *ngFor="let p of products">
      <div class="product-item-card">
        <div class="d-flex justify-content-between align-items-start">
          <span class="id-badge">ID: {{ p.productId }}</span>
          <div class="status-indicator"></div>
        </div>
        
        <h3 class="product-title mt-3">{{ p.name }}</h3>
        <p class="product-text text-secondary mb-4">{{ p.description || 'No description provided.' }}</p>
        
        <div class="card-action-row d-flex gap-2 pt-3 border-top">
          <button class="btn btn-action-edit w-100" (click)="startEdit(p)">Edit</button>
          <button class="btn btn-action-remove w-100" (click)="delete(p)">Remove</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="toastMsg" class="custom-toast" [ngClass]="toastType">
    {{ toastMsg }}
  </div>

  <div class="modal-overlay-custom" *ngIf="removeTarget">
    <div class="modal-card-3d">
      <h5 class="fw-bold mb-2">Remove Product?</h5>
      <p class="text-secondary small mb-4">Are you sure you want to delete <b>{{ removeTarget.name }}</b>? This action cannot be undone.</p>
      
      <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-light btn-sm fw-bold px-4" (click)="closeRemoveModal()" [disabled]="removing">Cancel</button>
        <button class="btn btn-danger btn-sm fw-bold px-4" (click)="confirmRemove()" [disabled]="removing">
          {{ removing ? 'Deleting...' : 'Remove' }}
        </button>
      </div>
    </div>
  </div>
</div>